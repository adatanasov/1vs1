(this.webpackJsonp1vs1=this.webpackJsonp1vs1||[]).push([[0],{20:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),r=a(13),i=a.n(r),c=(a(20),a(21),a(10)),l=a(2),o=a.n(l),u=a(9),h=a(5),p=a(6),d=a(8),f=a(7),y=a(14),j=a.n(y),b=a(4),m=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=new URLSearchParams(window.location.search);t.set("id",this.state.value),window.location.search=t.toString(),e.preventDefault()}},{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("label",{children:["On the website go to Points and copy this number from the URL:",Object(n.jsx)("i",{children:"https://fantasy.premierleague.com/entry/"}),Object(n.jsx)("b",{children:"2458458"}),Object(n.jsx)("i",{children:"/event/16"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"Player ID:",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"e.g. 2458458",value:this.state.value,onChange:this.handleChange})]}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"submit",value:"Check",className:"submit-entry"})]})}}]),a}(s.Component);var v=function(e){return Object(n.jsxs)("div",{className:"entry-info",children:[e.value,Object(n.jsx)("button",{onClick:e.onChange,className:"change-entry"})]})},g=a(11);var O=function(e){if(e.leagues&&e.leagues.length>0){var t=e.leagues.map((function(e){return Object(n.jsxs)("option",{"league-id":e.id,value:e.name,children:[e.entry_rank," - ",e.name]},e.id)}));return Object(n.jsx)("optgroup",{label:e.title,children:t})}return null},x=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={id:-1,value:"Select a League",leagues:e.leagues},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){var t=e.target.selectedIndex,a=e.target[t].getAttribute("league-id");this.setState({id:a,value:e.target.value});var n=[].concat(Object(g.a)(this.state.leagues.classic),Object(g.a)(this.state.leagues.h2h)).find((function(e){return e.id===+a}));this.props.onChange(n)}},{key:"render",value:function(){var e=this.state.leagues.classic&&this.state.leagues.classic.filter((function(e){return"x"===e.league_type})),t=this.state.leagues.h2h,a=this.state.leagues.classic.filter((function(e){return"s"===e.league_type}));return Object(n.jsxs)("select",{value:this.state.value,onChange:this.handleChange,className:"league-select",children:[Object(n.jsx)("option",{value:"Select a League",disabled:!0,hidden:!0,children:"Select a League"}),Object(n.jsx)(O,{leagues:e,title:"Classic Leagues"}),Object(n.jsx)(O,{leagues:t,title:"Head-to-Head Leagues"}),Object(n.jsx)(O,{leagues:a,title:"Global Leagues"})]})}}]),a}(s.Component),k=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n,s;return Object(h.a)(this,a),(s=t.call(this,e)).state={value:null!==(n=s.props.playerId)&&void 0!==n?n:"Select a player"},s.handleChange=s.handleChange.bind(Object(b.a)(s)),s}return Object(p.a)(a,[{key:"handleChange",value:function(e){this.setState({value:+e.target.value}),this.props.onChange(+e.target.value)}},{key:"render",value:function(){var e=this.props.rankings.map((function(e){return Object(n.jsx)("option",{value:e.entry,children:e.points_for?"".concat(e.entry_name," ").concat(e.total," (").concat(e.matches_won,"-").concat(e.matches_drawn,"-").concat(e.matches_lost,")"):"".concat(e.entry_name," ").concat(e.total," (").concat(e.event_total,")")},e.rank_sort)}));return Object(n.jsxs)("select",{value:this.state.value,onChange:this.handleChange,className:"player-select",children:[Object(n.jsx)("option",{value:"Select a player",disabled:!0,hidden:!0,children:"Select a player"}),e]})}}]),a}(s.Component);var w=function(e){return Object(n.jsxs)("div",{className:"points-wrapper",children:[Object(n.jsx)("span",{className:"points",children:e.points}),e.minusPoints<0&&Object(n.jsxs)("span",{className:"minusPoints",children:["(",e.minusPoints,")"]})]})};var _=function(e){var t=Object(n.jsxs)("svg",{viewBox:"0 0 24 24",children:[Object(n.jsx)("circle",{cx:"12",cy:"12",r:"12"}),Object(n.jsx)("path",{d:"M15.0769667,14.370341 C14.4472145,15.2780796 13.4066319,15.8124328 12.3019667,15.795341 C10.4380057,15.795341 8.92696674,14.284302 8.92696674,12.420341 C8.92696674,10.55638 10.4380057,9.045341 12.3019667,9.045341 C13.3988206,9.06061696 14.42546,9.58781014 15.0769667,10.470341 L17.2519667,8.295341 C15.3643505,6.02401882 12.1615491,5.35094208 9.51934028,6.67031017 C6.87713147,7.98967826 5.49079334,10.954309 6.17225952,13.8279136 C6.8537257,16.7015182 9.42367333,18.7279285 12.3769667,18.720341 C14.2708124,18.7262708 16.0646133,17.8707658 17.2519667,16.395341 L15.0769667,14.370341 Z",fill:"currentColor"})]}),a=Object(n.jsxs)("svg",{viewBox:"0 0 24 24",children:[Object(n.jsx)("circle",{cx:"12",cy:"12",r:"12"}),Object(n.jsx)("polygon",{points:"13.5 .375 8.925 12.375 4.65 12.375 0 .375 3.15 .375 6.75 10.05 10.35 .375",transform:"translate(5.25 6)",fill:"currentColor"})]}),s=Object(n.jsx)("svg",{x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:Object(n.jsx)("g",{children:Object(n.jsx)("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)",children:Object(n.jsx)("path",{d:"M4565.9,4988.3c-1114.1-104.7-2151.2-576.8-2945.4-1337.4c-727-695.4-1224.8-1590.2-1420.3-2550.3C-222.6-979.5,717.7-3077.5,2552.9-4142.2c553.1-320,1199.1-535.4,1854.9-618.3c292.4-37.5,892.9-37.5,1185.3,0c991.7,124.5,1872.7,519.6,2639.2,1181.3c675.6,582.8,1222.8,1440.1,1469.7,2295.4c513.6,1783.8,11.8,3656.5-1317.6,4930.7C7371,4618.9,5944.7,5118.6,4565.9,4988.3z M5968.4,2096.2L7934,130.7L5962.5-1838.8L3993-3810.3l-557.1,559.1l-559,557.1l1408.5,1408.5L5691.9,120.8L4289.3,1523.3c-770.4,770.4-1402.6,1410.5-1402.6,1422.3c0,19.8,1086.5,1116.1,1106.2,1116.1C3998.9,4061.8,4887.9,3176.8,5968.4,2096.2z"})})})}),r=Object(n.jsx)("svg",{x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:Object(n.jsx)("g",{children:Object(n.jsx)("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)",children:Object(n.jsx)("path",{d:"M4573.9,5006.6c-1148.9-116.7-2173.2-587.3-2984-1372.4C-344,1763.5-403.4-1329.2,1459.4-3273c1906.3-1989.3,5064.3-2026.9,7010.1-83.1c739.6,735.6,1204.3,1649.2,1386.2,2719c43.5,257.1,59.3,984.8,27.7,1271.5c-112.7,1026.3-520.1,1949.8-1214.2,2742.7c-622.9,711.9-1530.5,1261.6-2463.9,1495c-413.3,102.8-632.8,128.5-1117.3,136.4C4848.8,5010.5,4617.4,5010.5,4573.9,5006.6z M6565.2,3482c302.5-302.5,549.7-557.6,549.7-569.5c0-9.9-628.8-648.6-1398.1-1417.8l-1400-1400l1409.9-1409.9l1407.9-1408l-563.6-563.6l-563.6-563.6L4034-1876.9L2062.5,94.6l1967.6,1967.6c1081.7,1081.7,1971.5,1967.6,1977.5,1967.6S6264.6,3782.5,6565.2,3482z"})})})}),i=e.picks.map((function(i){return Object(n.jsxs)("li",{className:"player-pick ".concat(e.addSeparator&&11===i.position?"separator":""),children:[Object(n.jsxs)("span",{className:"player-pick-name ".concat(i.isReserve?"reserve":""," type").concat(i.type),children:[Object(n.jsx)("span",{className:"chance chance-".concat(i.chance)}),i.name]}),i.isCaptain?Object(n.jsx)("span",{className:"cap-icon ".concat(i.isTripleCaptainActive?"inverted":""),children:t}):null,i.isViceCaptain?Object(n.jsx)("span",{className:"cap-icon ".concat(i.isTripleCaptainActive?"inverted":""),children:a}):null,Object(n.jsx)("span",{className:"player-pick-points",children:i.hasMatch?i.canPlay?i.hasMatchStarted?i.points:i.opposingTeam:"x":"-"}),i.goesOut?Object(n.jsx)("span",{className:"sub-icon goes-out",children:s}):null,i.goesIn?Object(n.jsx)("span",{className:"sub-icon goes-in",children:r}):null]},i.id)}));return Object(n.jsx)("div",{className:"player-picks-wrapper",children:Object(n.jsx)("ul",{className:"player-picks",children:i})})},C=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"handlePlayerChange",value:function(e){this.props.handlePlayerChange(e)}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"player-info",children:[this.props.rankings&&Object(n.jsx)(k,{playerId:this.props.playerId,rankings:this.props.rankings,onChange:function(t){return e.handlePlayerChange(t)}}),Object(n.jsx)(w,{points:this.props.totalPoints,minusPoints:this.props.minusPoints}),this.props.playersToRender&&Object(n.jsx)(_,{picks:this.props.playersToRender,addSeparator:this.props.addSeparator})]})}}]),a}(s.Component),P="".concat("https://cryptic-plains-87247.herokuapp.com/").concat("https://fantasy.premierleague.com/api");function S(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(P,"/entry/").concat(t,"/")).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){return e.isSuccess=!0,e})).catch((function(e){e.json().then((function(e){return{isSuccess:!1,error:e}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(o.a.mark((function e(t,a,n){var s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a?"/leagues-h2h/":"/leagues-classic/",r="".concat(P).concat(s).concat(t,"/standings/"),e.abrupt("return",fetch(r).then((function(e){return e.json()})).then((function(e){if(a){var s="".concat(P,"/leagues-h2h-matches/league/").concat(t,"/?page=1&event=").concat(n);return fetch(s).then((function(e){return e.json()})).then((function(t){return{rankings:e.standings.results,matches:t.results}}))}return{rankings:e.standings.results,matches:null}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(P,"/bootstrap-static/")).then((function(e){return e.json()})).then((function(e){return{footballPlayers:e.elements,teams:e.teams}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(P,"/event/").concat(t,"/live/")).then((function(e){return e.json()})).then((function(e){return{liveStats:e.elements}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(P,"/fixtures/?event=").concat(t)).then((function(e){return e.json()})).then((function(e){return{fixtures:e}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(P,"/entry/").concat(t,"/event/").concat(a,"/picks/")).then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,a,n,s,r,i){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(o.a.mark((function e(t,a,n,s,r,i,l){var u,h,p,d,f,y,j,b,m,v,g,O,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(a,n);case 2:return h=e.sent,p=l.map((function(e){return e.team_h})).concat(l.map((function(e){return e.team_a}))),d=h.entry_history.event_transfers_cost,f=h.active_chip&&"bboost"===h.active_chip,y=h.active_chip&&"3xc"===h.active_chip,j=h.automatic_subs&&h.automatic_subs.length>0,b=F(l),m=h.picks.map((function(e){var t,a=s.find((function(t){return t.id===e.element})),n=i.find((function(t){return t.id===e.element})),c={id:e.element,teamId:a.team,name:a.web_name,points:n.stats.total_points,minutes:n.stats.minutes,bonus:n.stats.bonus,hasMatch:p.includes(a.team),hasMatchStarted:l.some((function(e){return e.started&&(e.team_h===a.team||e.team_a===a.team)})),opposingTeam:U(l,r,a.team),canPlay:null,hasPlayed:n.stats.minutes>0||n.stats.yellow_cards>0||n.stats.red_cards>0,goesIn:null,goesOut:null,isReserve:null,isCaptain:e.is_captain,isViceCaptain:e.is_vice_captain,isTripleCaptainActive:y,multiplier:e.multiplier,position:e.position,type:a.element_type,chance:null!==(t=a.chance_of_playing_this_round)&&void 0!==t?t:100};c.canPlay=V(c,l);var o=b.find((function(e){return e.element===c.id}));return o&&(c.bonus+=o.points,c.points+=o.points),c})),f||(H(m,11),j?J(m,h.automatic_subs):Z(m)),v=m.find((function(e){return e.isCaptain})),g=y?3:2,m.map((function(e){return e.points=K(e,v.canPlay,g)})),O=Q(m)-d,u={},Object(c.a)(u,"".concat(t,"picks"),h.picks),Object(c.a)(u,"".concat(t,"addSeparator"),!f),Object(c.a)(u,"".concat(t,"totalPoints"),O),Object(c.a)(u,"".concat(t,"minusPoints"),-d),Object(c.a)(u,"".concat(t,"playersToRender"),m),x=u,e.abrupt("return",x);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t.reduce((function(e,t){return e.concat.apply(e,Object(g.a)(t))}),[]);return n}(e.filter((function(e){return e.started&&0===e.stats.find((function(e){return"bonus"===e.identifier})).h.length&&0===e.stats.find((function(e){return"bonus"===e.identifier})).a.length})).map((function(e){var t=[].concat(Object(g.a)(e.stats.find((function(e){return"bps"===e.identifier})).h),Object(g.a)(e.stats.find((function(e){return"bps"===e.identifier})).a));t.sort((function(e,t){return t.value-e.value}));var a=3;t[0].points=a;for(var n=1,s=1,r=[t[0]],i=1;i<t.length;i++)if(t[i].value===t[i-1].value)t[i].points=a,3===a&&n++,s++,r.push(t[i]);else{if(s>=3)break;n>1?a=1:a--,t[i].points=a,s++,r.push(t[i])}return r})))}function U(e,t,a){var n=e.find((function(e){return e.team_h===a||e.team_a===a}));if(n){var s="";return s=n.team_h===a?n.team_a:n.team_h,t.find((function(e){return e.id===s})).short_name}return null}function V(e,t){var a=e.hasMatch,n=a;a&&(!t.filter((function(t){return t.team_h===e.teamId||t.team_a===e.teamId})).some((function(e){return!1===e.finished_provisional}))&&(n=e.hasPlayed));return n}function H(e,t){for(var a=t;a<e.length;a++)e[a].isReserve=!0}function J(e,t){for(var a=function(a){var n=t[a];e.find((function(e){return e.id===n.element_in})).goesIn=!0,e.find((function(e){return e.id===n.element_out})).goesOut=!0},n=0;n<t.length;n++)a(n)}function Z(e){var t=e.find((function(e){return 1===e.position}));if(!t.canPlay){var a=e.find((function(e){return 12===e.position}));a.hasPlayed&&(t.goesOut=!0,a.goesIn=!0)}for(var n=e.filter((function(e){return e.position>1&&!e.isReserve&&(!e.hasMatch||!e.canPlay)})),s=e.filter((function(e){return e.position>12&&e.canPlay})),r=0;r<n.length;r++)for(var i=n[r],c=0;c<s.length;c++){var l=s[c];if(!l.goesIn&&q(e,i.type,l.type)){if(l.hasPlayed){i.goesOut=!0,l.goesIn=!0;break}break}}}function q(e,t,a){if(t===a||3===t)return!0;var n=e.filter((function(e){return!e.isReserve&&!e.goesOut||e.isReserve&&e.goesOut})).filter((function(e){return e.type===t})).length;return!(2===t&&n<=3)&&!(4===t&&n<=1)}function K(e,t,a){return e.isCaptain&&t?e.points*e.multiplier:e.isViceCaptain&&e.hasMatch&&!t?e.points*a:e.points}function Q(e){return e.filter((function(e){return!e.isReserve&&!e.goesOut||e.isReserve&&e.goesIn})).reduce((function(e,t){return e+t.points}),0)}var X=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,player1picks:null,player2picks:null,player1totalPoints:0,player2totalPoints:0,player1minusPoints:null,player2minusPoints:null,player1playersToRender:null,player2playersToRender:null,player1addSeparator:!0,player2addSeparator:!0},n.refresh=n.refresh.bind(Object(b.a)(n)),n.backToLeague=n.backToLeague.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"refresh",value:function(e){this.props.refresh()}},{key:"backToLeague",value:function(e){this.props.backToLeague()}},{key:"showLoader",value:function(){this.setState({isLoading:!0}),this.props.showLoader()}},{key:"hideLoader",value:function(){this.setState({isLoading:!1}),this.props.hideLoader()}},{key:"componentDidMount",value:function(){this.props.currentGameweek>=this.props.gameweek&&(this.props.player1&&this.fillPlayerPicksForEvent("player1",this.props.player1,this.props.gameweek),this.props.player2&&this.fillPlayerPicksForEvent("player2",this.props.player2,this.props.gameweek))}},{key:"handlePlayerChange",value:function(e,t){this.props.handlePlayerChange(e,t)}},{key:"fillPlayerPicksForEvent",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a,n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.showLoader(),!(this.props.footballPlayers&&this.props.teams&&this.props.liveStats&&this.props.fixtures)){e.next=6;break}return e.next=4,z(t,a,n,this.props.footballPlayers,this.props.teams,this.props.liveStats,this.props.fixtures);case 4:s=e.sent,this.setState(s);case 6:this.hideLoader();case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"details-wrapper",children:[Object(n.jsxs)("div",{className:"players-info",children:[this.props.rankings&&Object(n.jsx)(C,{playerId:this.props.player1,rankings:this.props.rankings,totalPoints:this.state.player1totalPoints,minusPoints:this.state.player1minusPoints,playersToRender:this.state.player1playersToRender,handlePlayerChange:function(t){return e.handlePlayerChange("player1",t)},addSeparator:this.state.player1addSeparator},this.props.player1),this.props.rankings&&Object(n.jsx)(C,{playerId:this.props.player2,rankings:this.props.rankings,totalPoints:this.state.player2totalPoints,minusPoints:this.state.player2minusPoints,playersToRender:this.state.player2playersToRender,handlePlayerChange:function(t){return e.handlePlayerChange("player2",t)},addSeparator:this.state.player2addSeparator},this.props.player2)]}),Object(n.jsxs)("div",{className:"refresh-wrapper",children:[this.props.ish2h?Object(n.jsx)("button",{onClick:this.backToLeague,className:"refresh back",children:"Go back"}):null,Object(n.jsx)("button",{onClick:this.refresh,className:"refresh",disabled:this.state.isLoading,children:"Refresh"})]})]})}}]),a}(s.Component),Y=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isLoading:!1},n.openMatch=n.openMatch.bind(Object(b.a)(n)),n.refreshAll=n.refreshAll.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"openMatch",value:function(e,t){this.props.openMatch(e,t)}},{key:"refreshAll",value:function(e){this.props.refreshAll()}},{key:"render",value:function(){var e=this;if(this.props.matches&&this.props.matches.length>0){var t=this.props.matches.map((function(t){return Object(n.jsxs)("div",{className:"match-row"+(e.props.playerId===t.entry_1_entry||e.props.playerId===t.entry_2_entry?" own-match":""),onClick:function(){return e.openMatch(t.entry_1_entry,t.entry_2_entry)},children:[Object(n.jsxs)("span",{className:"match-player text-right pr10",children:[Object(n.jsx)("div",{className:"text-ellipsis",children:t.entry_1_name}),Object(n.jsx)("div",{className:"text-ellipsis",children:t.entry_1_player_name})]}),Object(n.jsx)("span",{className:"points-small pr5",children:t.entry_1_points}),Object(n.jsx)("span",{className:"points-small pl5",children:t.entry_2_points}),Object(n.jsxs)("span",{className:"match-player text-left pl10",children:[Object(n.jsx)("div",{className:"text-ellipsis",children:t.entry_2_name}),Object(n.jsx)("div",{className:"text-ellipsis",children:t.entry_2_player_name})]})]},t.id)}));return Object(n.jsxs)("div",{children:[t,Object(n.jsx)("div",{className:"refresh-wrapper",children:this.props.inProgress?Object(n.jsx)("button",{onClick:this.refreshAll,className:"refresh",disabled:this.state.isLoading,children:"Refresh all"}):null})]})}return null}}]),a}(s.Component),$=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={value:e.currentEvent},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.props.onChange(+e.target.value)}},{key:"render",value:function(){for(var e=Array(38),t=0;t<e.length;t++)e[t]={name:"GW ".concat(t+1).concat(this.props.currentEvent===t+1?" - current":""),value:t+1};var a=e.map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.name},e.name)}));return Object(n.jsx)("select",{value:this.state.value,onChange:this.handleChange,className:"event-select",children:a})}}]),a}(s.Component),ee=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var s=new URLSearchParams(window.location.search),r=parseInt(s.get("id"));return r?localStorage.setItem("PlayerId",r):(r=localStorage.getItem("PlayerId"))&&(s.set("id",r),window.location.search=s.toString()),n.state={isLoading:!1,playerId:r,playerName:null,playerInfo:null,currentGameweek:null,gameweek:null,leagues:null,selectedLeague:null,rankings:null,matches:null,showMatches:!1,footballPlayers:null,teams:null,liveStats:null,fixtures:null,player1:r,player2:null,inProgress:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.playerId&&this.handlePlayerId(this.state.playerId),e.next=3,M();case 3:t=e.sent,this.setState(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePlayerId",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoader(),localStorage.setItem("PlayerId",t),e.next=4,S(t);case 4:a=e.sent,this.handlePlayerInfo(a),this.hideLoader(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePlayerInfo",value:function(e){var t;t=e.isSuccess?"".concat(e.name,", ").concat(e.player_first_name," ").concat(e.player_last_name):e.error,this.setState({playerId:e.id,playerName:t,playerInfo:e,currentGameweek:e.current_event,gameweek:e.current_event,leagues:e.leagues,player1:e.id}),this.handleGameWeekChange(this.state.gameweek)}},{key:"handlePlayerReset",value:function(){this.setState({playerId:null,playerName:null,playerInfo:null,leagues:null})}},{key:"handleLeagueChange",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,s,r,i,c,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoader(),t.ish2h="h"===t.scoring,this.setState({selectedLeague:t}),e.next=5,I(t.id,t.ish2h,this.state.gameweek);case 5:if(a=e.sent,!t.ish2h||!a.matches){e.next=28;break}if(n=0===a.matches[0].entry_1_total&&0===a.matches[0].entry_2_total,this.setState({inProgress:n,showMatches:!0}),!n||this.state.currentGameweek!==this.state.gameweek){e.next=26;break}s=0;case 11:if(!(s<a.matches.length)){e.next=26;break}return r=a.matches[s],e.next=15,z(r.entry_1_entry,r.entry_1_entry,this.state.gameweek,this.state.footballPlayers,this.state.teams,this.state.liveStats,this.state.fixtures);case 15:return i=e.sent,c=i["".concat(r.entry_1_entry,"totalPoints")],r.entry_1_points=c,e.next=20,z(r.entry_2_entry,r.entry_2_entry,this.state.gameweek,this.state.footballPlayers,this.state.teams,this.state.liveStats,this.state.fixtures);case 20:l=e.sent,u=l["".concat(r.entry_2_entry,"totalPoints")],r.entry_2_points=u;case 23:s++,e.next=11;break;case 26:e.next=29;break;case 28:this.setState({showMatches:!1});case 29:this.setState(a),this.setState({player1:this.state.playerId,player2:null}),this.hideLoader();case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleGameWeekChange",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoader(),e.next=3,T(t);case 3:return n=e.sent,e.next=6,G(t);case 6:s=e.sent,this.setState(n),this.setState(s),this.setState({gameweek:t}),(null===(a=this.state.selectedLeague)||void 0===a?void 0:a.ish2h)&&this.state.showMatches&&this.handleLeagueChange(this.state.selectedLeague),this.hideLoader();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePlayerChange",value:function(e,t){this.setState(Object(c.a)({},"".concat(e),t))}},{key:"openMatch",value:function(e,t){this.setState({player1:e,player2:t,showMatches:!1})}},{key:"backToLeague",value:function(){this.setState({showMatches:!0})}},{key:"refresh",value:function(){this.handleGameWeekChange(this.state.gameweek)}},{key:"refreshAll",value:function(){this.handleLeagueChange(this.state.selectedLeague)}},{key:"showLoader",value:function(){this.setState({isLoading:!0})}},{key:"hideLoader",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(j.a,{type:"Oval",color:"#37003C",height:80,width:80,visible:this.state.isLoading,className:"loader"}),!this.state.selectedLeague&&Object(n.jsx)("div",{className:"version",children:"v.1.20"}),!this.state.playerId&&Object(n.jsx)(m,{}),this.state.playerId&&this.state.playerName&&Object(n.jsx)(v,{value:this.state.playerName,onChange:function(){return e.handlePlayerReset()}}),this.state.playerId&&this.state.leagues&&Object(n.jsx)(x,{leagues:this.state.leagues,onChange:function(t){return e.handleLeagueChange(t)}}),this.state.gameweek&&this.state.rankings&&Object(n.jsx)($,{currentEvent:this.state.currentGameweek,onChange:function(t){return e.handleGameWeekChange(t)}}),this.state.matches&&this.state.showMatches&&Object(n.jsx)(Y,{playerId:this.state.playerId,gameweek:this.state.gameweek,matches:this.state.matches,inProgress:this.state.inProgress,openMatch:function(t,a){return e.openMatch(t,a)},refreshAll:function(){return e.refreshAll()}}),this.state.playerId&&this.state.gameweek&&this.state.liveStats&&this.state.fixtures&&this.state.rankings&&!this.state.showMatches&&Object(n.jsx)(X,{player1:this.state.player1,player2:this.state.player2,gameweek:this.state.gameweek,currentGameweek:this.state.currentGameweek,rankings:this.state.rankings,liveStats:this.state.liveStats,fixtures:this.state.fixtures,footballPlayers:this.state.footballPlayers,teams:this.state.teams,ish2h:this.state.selectedLeague.ish2h,showLoader:function(){return e.showLoader()},hideLoader:function(){return e.hideLoader()},backToLeague:function(){return e.backToLeague()},refresh:function(){return e.refresh()},handlePlayerChange:function(t,a){return e.handlePlayerChange(t,a)}},"".concat(this.state.gameweek,"-").concat(this.state.player1,"-").concat(this.state.player2))]})}}]),a}(s.Component);i.a.render(Object(n.jsx)(ee,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.8e0718ce.chunk.js.map